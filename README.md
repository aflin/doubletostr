# doubletostr
Converts a double sized float into a sortable ascii string

## To Make:
```
make
```

## The command line utility:
```
./dtos -h
Convert a double sized float to an ascii sortable string
Usage:
  dtos [-s|-d|-r|-h] [string|float]
     -s safe:     encode using a-z|A-Z|0-9|:|@|.|- chars only (url, html & shell safe)
     -d decode:   decode an encoded string to double
     -r reencode: reencode and print conversion
     -h help:     This help message

  stod            same as dtos -d (decode by defaut)
```

## Sample Usage:
```
$ ./dtos -s 1
.UUYUUUUUUUUUU
$ ./dtos -s -0.000001
-UoPNN11DII4HG
# you can see floating point inaccuracy here:
$ ./dtos -d -UoPNN11DII4HG
-0.000000999999999999999954748111825886258685613938723690807819366455078125
```

## Full example demonstrating sortability:
```
#The following encodes a bunch of doubles, sorts them with standard unix sort utility and then decodes.
$ for i in DBL_MAX DBL_MIN -DBL_MIN -DBL_MAX 0 -1000 1 10 100 1000 10000 0.0000000000001; do
>      ./dtos -s $i;
> done | LC_ALL=C sort| while read j; do
>      echo -n "$j "; ./dtos -d $j;
> done;
-00M0000000000 -179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368.0
-TKM5TTTTTTTTT -1000.0
-zyPTTTTTTTTTT -0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000222507385850720138309023271733240406421921598046233183055332741688720443481391819585428315901251102056406733973103581100515243416155346010885601238537771882113077799353200233047961014744258363607192156
.01UUUUUUUUUUU 0.0
.01YUUUUUUUUUU 0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002225073858507201383090232717332404064219215980462331830553327416887204434813918195854283159012511020564067339731035811005152434161553460108856012385377718821130777993532002330479610147442583636071921565
.SHbVZsdoYmxoW 0.00000000000010000000000000000303737455634003709136034716842278413651001756079494953155517578125
.UUYUUUUUUUUUU 1.0
.UXZUUUUUUUUUU 10.0
.UaacUUUUUUUUU 100.0
.UdbuUUUUUUUUU 1000.0
.UhYwcUUUUUUUU 10000.0
.zzbzzzzzzzzzz 179769313486231570814527423731704356798070567525844996598917476803157260780028538760589558632766878171540458953514382464234321326889464182768467546703537516986049910576551282076245490090389328944075868508455133942304583236903222948165808559332123348274797826204144723168738177180919299881250404026184124858368.0
```
## Library usage:

Fairly straight forward.
```
/* takes a double and generates a string representation that can
   be sorted (ascii) and will also be in numerical order
   
   **str is pointer to a char array which must be pre-allocated and 
         at least 15 chars
*/
void doubletostr32(double x, char **str, int safe);

/* convert a string generated by doubletostr32 back to a double */
double str32todouble (char *s);
```
